/* OGX.JS ContextMenu@1.0.1 */
require("ContextMenu","Uxi","Touch","Overlay");OGX.ContextMenu=function(e){construct(this,"ContextMenu");"use strict";var n=this;var o={index:0,el:"body",x:0,y:0,list:[],key:null,display:{html:"<span>{{$label}}</span>",css:"ogx_context_menu_item"},callback:null,html:'<div class="ogx_context_menu_body"><div class="ogx_context_menu_list"></div></div>',"node:OML":{".ogx_context_menu_body > .ogx_context_menu_list:DynamicList":{id:"ogx_context_menu_list"}}};var i="ogx_context_menu";var s,l;this._NAME_=OGX.ContextMenu.NAME;this.construct=function(){};this.ux=function(t){if(t){this.touch.enable();$(window).on(this.touch.down,c);this.el.on(OGX.DynamicList.SELECT,u)}else{this.touch.disable();$(window).off(this.touch.down,c);this.el.off(OGX.DynamicList.SELECT,u)}};function c(t){t=n.event(t);if(!n.el[0].contains(t.target)){n.parent.remove("ContextMenu",n.id)}}function u(t,e){if(s.callback){s.callback(e)}setTimeout(function(){app.remove("ContextMenu",s.id)},0)}function t(){s=OGX.Data.merge(e,o,false);l=n.el=$(s.el);l.html(s.html);var t=s["node:OML"][".ogx_context_menu_body > .ogx_context_menu_list:DynamicList"];t.display=s.display;t.key=s.key;t.list=s.list;if(s.index){n.z=s.index}else{n.z=s.parent.topIndex()}l.addClass(i);l.css({top:s.y+"px",left:s.x+"px","z-index":n.z})}t()};OGX.ContextMenu.NAME="ContextMenu";OGX.ContextMenu.FLOAT=true;/* OGX.JS Docker@1.1.1 */
require("Docker","Uxi","Touch");OGX.Docker=function(e){construct(this,"Docker");"use strict";var t=this;var o,a;var i={template:'{{$count > 1 ? @ct = "" : @ct = "hidden"; $visible ? @vz = "" : @vz = "hidden";}}<span class="ogx_docker_item_icon {{$css}}" style="background-image:url({{$icon}})"></span><span class="ogx_docker_item_line {{@vz}}"></span><span class="ogx_docker_item_count {{@ct}}">{{$count}}</span>',groups:{user:{icon:{default:"/img/user.png",bind:{lookup:"Views.UserProfile",method:"getIcon",property:"icon"}}}}};var c=OGX.Data.merge(e,i,false,true);var r=null;this.el=null;this.construct=function(){v()};this.ux=function(e){if(e){a.el.on(OGX.DynamicList.SELECT,p);o.on("mouseover",".ogx_docker_item",function(e){var o=$(this);var i=o.data("ogx-id");var n=a.val().get({id:{eq:i}},null,1);f(o,n)});o.on("mouseout",".ogx_docker_item",m);$(document).on(OGX.Popup.SHOW,n);$(document).on(OGX.Popup.HIDE,d);$(document).on(OGX.Popup.CLOSE,s);$(document).on(OGX.Popup.GROUP,u);$(document).on(OGX.Popup.UNGROUP,l)}else{a.el.off(OGX.DynamicList.SELECT,p);o.off("mouseover",".ogx_docker_item");o.off("mouseout",".ogx_docker_item",m);$(document).off(OGX.Popup.SHOW,n);$(document).off(OGX.Popup.HIDE,d);$(document).off(OGX.Popup.CLOSE,s);$(document).off(OGX.Popup.GROUP,u);$(document).off(OGX.Popup.UNGROUP,l)}};this.blink=function(e,o){var i=a.val().get({id:{eq:o}},null,1);if(!i){return false}if(e){i.css="ogx_docker_blink"}else{i.css=""}a.findUpdate("id",o,i,false,1)};this.addItem=function(e,o){typeof o==="undefined"?o={}:null;var i={icon:null,minimized:false,blink:false,css:""};var n=OGX.Data.merge(i,o,true,true,true);var t=0;if(!n.icon){var d=c.groups[e.group].icon;n.icon=d.default;if(d.hasOwnProperty("bind")&&d.bind){var s=e.gather(d.bind.lookup);if(s.length===1){if(d.bind.hasOwnProperty("method")){n.icon=s[0][d.bind.method]()}else{if(d.bind.hasOwnProperty("property")){n.icon=s[0][d.bind.property]}}}}}if(e.group){if(e.nodes.length&&e.nodes[0]._NAME_==="Container"){t=e.nodes[0].children("Carousel")[0].nodes.length}}var r={id:e.id,icon:n.icon,count:t,visible:!n.minimized,css:n.css};if(n.blink){r.css+=" ogx_docker_blink"}a.insert(r)};this.removeItem=function(e){a.findDelete("id",e,1)};this.findItem=function(e,o){var i=app.cfind(e,o);if(i){var n=app.findPopup(i);if(n){return n}}return false};this.findShow=function(e,o){var i=this.find(e,o);if(i){i.reveal();return true}return false};function n(e,o){a.findUpdate("id",o.id,{visible:true},false,1)}function d(e,o){a.findUpdate("id",o.id,{visible:false},false,1)}function s(e,o){t.removeItem(o)}function u(e,o){a.findDelete("id",o.popups[0],1);a.findDelete("id",o.popups[1],1);t.addItem(o.popup)}function l(e,o){var i=a.val().get({id:{eq:o.from_popup}},null,1);if(i){a.findUpdate("id",o.from_popup,{count:i.count-1},false,1);var n=app.cfind("Popup",o.to_popup);t.addItem(n)}}function p(e,o){var i=app.cfind("Popup",o.id);a.findUpdate("id",o.id,{visible:true,css:""},false,1);i.show(false);t.el.trigger(OGX.Docker.SHOW,o.id)}function f(e,o){if(r){r.remove();r=null}var i=app.cfind("Popup",o.id);var n=e.offset();var t='<div class="ogx_docker_sub" data-id="'+o.id+'" style="left:'+n.left+"px; top:"+(n.top+e.height())+"px; transform: translateX( calc(-50% + "+e.width()/2+'px) )">';var d,s;if(o.count>1){d=i.nodes[0].nodes[0].el.children(".ogx_tabs_container").find(".ogx_tabs_tab_label");d.each(function(e,o){s=$(o).html();t+='<span class="ogx_docker_sub_label">'+s+"</span>"})}else{s=i.title();t+='<span class="ogx_docker_sub_label">'+s+"</span>"}t+="</div>";$("body").append(t);r=$("body").children('.ogx_docker_sub[data-id="'+o.id+'"]')}function m(e){if(r){r.remove();r=null}}function _(){t.el=$(e.el);o=t.el;o.html('<div class="docker_list"></div>').addClass("ogx_docker")}function v(){a=t.create("DynamicList",{el:'.ogx_uxi[data-ogx-id="'+t.id+'"] .docker_list',id:"docker_list",key:"id",mode:"hit",display:{html:c.template,css:"ogx_docker_item"}})}function g(){_()}g()};OGX.Docker.SHOW="DockerShow";/* OGX.JS FlexCells@1.0.5 */
require("FlexCells","Uxi","Template","Touch","Placeholder");OGX.FlexCells=function(i){construct(this,"FlexCells");"use strict";var t=this;var e={axis:"x",min:10,template:null,children:["50%","30%","20%"]};var c=OGX.Data.merge(i,e,false);var n=this.el;var r={x:0,y:0,m:0};var x=null;this.construct=function(){};this.renderAt=function(e,l){this.clearAt(e);l=OGX.OML.rename(l,'.ogx_flex_cells[data-ogx-id="'+this.id+'"] > .ogx_flex_cell[data-cell="'+e+'"]');c["node:OML"].push(l);OGX.OML.render(this,l)};this.clearAt=function(e){var s,a;this.el.children('.ogx_flex_cell[data-cell="'+e+'"]').find(".ogx_uxi").each(function(e,l){s=$(l).data("ogx-id");a=t.find(null,s);if(a){console.log("clear",a);a.kill()}})};function l(){var e="";for(var l=0;l<c.children.length;l++){e+='<span class="ogx_flex_cell" data-cell="'+l+'" style="flex-basis:'+c.children[l]+'"></span>';if(l<c.children.length-1){e+='<span class="ogx_flex_cell_resize"></span>'}}n.html(e)}function s(e){x=$(e.target);r.x=0;r.y=0;r.m=0}function a(e){var l;if(i.axis==="x"){l=(e.distX-r.m)*100/n.width();r.m=e.distX}else{l=(e.distY-r.m)*100/n.height();r.m=e.distY}var s=Number(x.prev().css("flex-basis").split("%")[0]);var a=Number(x.next().css("flex-basis").split("%")[0]);if(s+l>c.min&&a-l>c.min){x.prev().css("flex-basis",s+l+"%");x.next().css("flex-basis",a-l+"%");setTimeout(()=>t.resizeNodes,5)}}function o(){var e={id:"move",min:0,target:".ogx_flex_cell_resize",cb_down:s,cb_move:a,capture:true};if(c.axis==="x"){e.x=true}else{e.y=true}t.touch.add("Move",e)}function f(){var e=n.children();var s=e.length;e.each(function(e,l){$(l).addClass("ogx_flex_cell").attr("data-cell",e).css("flex-basis",c.children[e]);if(e<s-1){$(l).after('<span class="ogx_flex_cell_resize"></span>')}})}function d(){var e=[];for(var l=0;l<c["node:OML"].length;l++){for(var s in c["node:OML"][l]){e.push('.ogx_flex_cells[data-ogx-id="'+t.id+'"] > .ogx_flex_cell[data-cell="'+l+'"]')}}t.placeholders(c,e)}function _(){n.addClass("ogx_flex_cells");if(c.axis==="x"){n.addClass("ogx_flex_cells_row")}else{n.addClass("ogx_flex_cells_col")}if(c.template){f()}d();if(!c.template){l()}o()}_()};