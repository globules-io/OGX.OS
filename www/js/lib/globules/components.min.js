/* OGX.JS ContextMenu@1.0.1 */
require("ContextMenu","Uxi","Touch","Overlay");OGX.ContextMenu=function(e){construct(this,"ContextMenu");"use strict";var n=this;var o={index:0,el:"body",x:0,y:0,list:[],key:null,display:{html:"<span>{{$label}}</span>",css:"ogx_context_menu_item"},callback:null,html:'<div class="ogx_context_menu_body"><div class="ogx_context_menu_list"></div></div>',"node:OML":{".ogx_context_menu_body > .ogx_context_menu_list:DynamicList":{id:"ogx_context_menu_list"}}};var i="ogx_context_menu";var s,l;this._NAME_=OGX.ContextMenu.NAME;this.construct=function(){};this.ux=function(t){if(t){this.touch.enable();$(window).on(this.touch.down,c);this.el.on(OGX.DynamicList.SELECT,u)}else{this.touch.disable();$(window).off(this.touch.down,c);this.el.off(OGX.DynamicList.SELECT,u)}};function c(t){t=n.event(t);if(!n.el[0].contains(t.target)){n.parent.remove("ContextMenu",n.id)}}function u(t,e){if(s.callback){s.callback(e)}setTimeout(function(){app.remove("ContextMenu",s.id)},0)}function t(){s=OGX.Data.merge(e,o,false);l=n.el=$(s.el);l.html(s.html);var t=s["node:OML"][".ogx_context_menu_body > .ogx_context_menu_list:DynamicList"];t.display=s.display;t.key=s.key;t.list=s.list;if(s.index){n.z=s.index}else{n.z=s.parent.topIndex()}l.addClass(i);l.css({top:s.y+"px",left:s.x+"px","z-index":n.z})}t()};OGX.ContextMenu.NAME="ContextMenu";OGX.ContextMenu.FLOAT=true;/* OGX.JS Docker@1.3.0 */
require("Docker","Uxi","Touch");OGX.Docker=function(e){construct(this,"Docker");"use strict";var n=this;var o,w;var i={template:'{{$count > 1 ? @ct = "" : @ct = "hidden"; $visible ? @vz = "" : @vz = "hidden";}}<span class="ogx_docker_item_icon {{$css}}" style="background-image:url({{$icon}})"></span><span class="ogx_docker_item_line {{@vz}}"></span><span class="ogx_docker_item_count {{@ct}}">{{$count}}</span>',preview:{mode:"preview",templates:{preview:'<span class="ogx_docker_sub_head"><span class="ogx_docker_sub_icon" style="background-image:url({{$icon}});"></span><span class="ogx_docker_sub_label">{{$title}}</span></span><span class="ogx_docker_sub_body" style="width:{{$width}}; height:{{$height}};"><span class="ogx_docker_sub_container" style="width:{{$grow}}%; height:{{$grow}}%; transform:scale({{$scale}});">{{$body}}</span></span></span>',title:'<span class="ogx_docker_sub_icon" style="background-image:url({{$icon}});"></span><span class="ogx_docker_sub_label">{{$title}}</span>'},width:240,height:260,x:"center",y:"top",offx:0,offy:-30,over_timeout:500,remove_timeout:500,showcase_timeout:1500},groups:{default:{icon:{default:"/img/settings.svg"},title:{}},user:{icon:{default:"/img/user.png",bind:{lookup:"Views.UserProfile",method:"getIcon",property:"icon"}},title:{}}},anim_show:"fade slide"};var k=OGX.Data.weld(e,i);var x=null;var r=null;var a=null;var y=null;var t=null;var s=[];this.el=null;this.construct=function(){h()};this.ux=function(e){if(e){w.el.on(OGX.DynamicList.SELECT,f);o.on("mouseenter",".ogx_docker_item",function(e){if(a){clearTimeout(a)}var o=$(this);var i=o.data("ogx-id");if(i!==r){var t=w.val().get({id:{eq:i}},null,1);a=setTimeout(()=>{if(!app.cfind("Popup",t.id).visible){r=t.id;v(o,t)}},k.preview.over_timeout)}else{if(y){clearTimeout(y);y=null}}});$("body").on("mouseenter",".ogx_docker_sub",function(e){var o=$(this);var i=app.cfind("Popup",o.data("id"));if(y){clearTimeout(y);y=null}if(t){clearTimeout(t);t=null}t=setTimeout(()=>{s=app.getVisiblePopups();s.forEach(e=>{if(e.id!==i.id){e.hide(false)}});i.show(false)},k.preview.showcase_timeout)});$("body").on(this.touch.down,".ogx_docker_sub",function(e){var o=$(this);var i=app.cfind("Popup",o.data("id"));if(y){clearTimeout(y);y=null}if(t){clearTimeout(t);t=null}O();t=setTimeout(()=>{s.forEach(e=>{e.show(false)});i.front()},k.preview.showcase_timeout)});$("body").on("mouseleave",".ogx_docker_sub",g);$("body").on("mouseleave",".ogx_docker_item",g);$(document).on(OGX.Popup.SHOW,u);$(document).on(OGX.Popup.HIDE,l);$(document).on(OGX.Popup.CLOSE,c);$(document).on(OGX.Popup.GROUP,d);$(document).on(OGX.Popup.UNGROUP,p)}else{w.el.off(OGX.DynamicList.SELECT,f);o.off("mouseenter",".ogx_docker_item");$("body").off("mouseenter",".ogx_docker_sub");$("body").off("mouseleave",".ogx_docker_sub",g);$("body").off("mouseleave",".ogx_docker_item",g);$(document).off(OGX.Popup.SHOW,u);$(document).off(OGX.Popup.HIDE,l);$(document).off(OGX.Popup.CLOSE,c);$(document).off(OGX.Popup.GROUP,d);$(document).off(OGX.Popup.UNGROUP,p)}};this.blink=function(e,o){var i=w.val().get({id:{eq:o}},null,1);if(!i){return false}if(e){i.css="ogx_docker_blink"}else{i.css=""}w.findUpdate("id",o,i,false,1)};this.addItem=function(e,o){typeof o==="undefined"?o={}:null;var i={icon:null,minimized:false,blink:false,css:""};var t=OGX.Data.merge(i,o,true,true,true);var n=0;if(!t.icon){if(k.groups.hasOwnProperty(e.group)&&k.groups[e.group].hasOwnProperty("icon")&&k.groups[e.group].icon.hasOwnProperty("bind")){var r=e.gather(k.groups[e.group].icon.bind.lookup);if(r.length===1){if(k.groups[e.group].icon.bind.hasOwnProperty("method")){t.icon=r[0][k.groups[e.group].icon.bind.method]()}else{if(k.groups[e.group].icon.bind.hasOwnProperty("property")){t.icon=r[0][k.groups[e.group].icon.bind.property]}}}}if(!t.icon&&k.groups.hasOwnProperty(e.group)&&k.groups[e.group].hasOwnProperty("icon")&&k.groups[e.group].icon.hasOwnProperty("default")){t.icon=k.groups[e.group].icon.default}if(!t.icon){t.icon=e.icon()}if(!t.icon){t.icon=k.groups.default.icon.default}}if(e.group){if(e.nodes.length&&e.nodes[0]._NAME_==="Container"){n=e.nodes[0].children("Carousel")[0].nodes.length}}var a={id:e.id,icon:t.icon,count:n,visible:!t.minimized,css:t.css};if(t.blink){a.css+=" ogx_docker_blink"}w.insert(a)};this.removeItem=function(e){w.findDelete("id",e,1)};this.findItem=function(e,o){var i=app.cfind(e,o);if(i){var t=app.findPopup(i);if(t){return t}}return false};this.findShow=function(e,o){var i=this.find(e,o);if(i){i.reveal();return true}return false};function u(e,o){w.findUpdate("id",o.id,{visible:true},false,1)}function l(e,o){w.findUpdate("id",o.id,{visible:false},false,1)}function c(e,o){n.removeItem(o)}function d(e,o){w.findDelete("id",o.popups[0],1);w.findDelete("id",o.popups[1],1);n.addItem(o.popup)}function p(e,o){var i=w.val().get({id:{eq:o.from_popup}},null,1);if(i){w.findUpdate("id",o.from_popup,{count:i.count-1},false,1);var t=app.cfind("Popup",o.to_popup);n.addItem(t)}}function f(e,o){g(null,false);var i=app.cfind("Popup",o.id);w.findUpdate("id",o.id,{visible:true,css:""},false,1);i.show(k.anim_show).front();n.el.trigger(OGX.Docker.SHOW,o.id)}function v(e,o){if(y){clearTimeout(y);y=null}O();var i=app.cfind("Popup",o.id);var t=e.offset();var n=k.preview.width;var r=k.preview.height;if(k.preview.mode==="preview"){var a=i.el.width();var s=i.el.height();!a?a=n:null;!s?s=r:null;var u=s/a;var l=r/s;n=r/u;var c=a/n*100}switch(k.preview.x){case"left":break;case"right":t.left+=e.width();break;case"center":t.left-=n/2;t.left<0?t.left=0:null;break}switch(k.preview.y){case"top":t.top-=e.height()+r;break;case"bottom":t.top+=e.height();break;case"center":t.top-=r/2+e.height()/2;break}if(k.preview.offx){t.left+=k.preview.offx}if(k.preview.offy){t.top+=k.preview.offy}var d=k.preview.mode;var p=k.preview.templates[d];var f="";var v=app.getStage();var g=v.topIndex();var m=w.val().get({id:{eq:o.id}},null,1);var h=m.icon;var _='<div class="ogx_docker_sub" data-id="'+o.id+'" style="left:'+t.left+"px; top:"+t.top+"px; z-index:"+g+';">';switch(d){case"title":_+=OGX.Templater.make(p,{title:i.title(),icon:h});break;case"preview":var b=[];i.el.find("canvas").each(function(e,o){b.push(o)});f=i.el.find(".ogx_popup_body").html();_+=OGX.Templater.make(p,{title:i.title(),width:n+"px",height:r+"px",body:f,icon:h,scale:l,grow:c});break}_+="</div>";v.observeOnce(null,()=>{x=v.el.children('.ogx_docker_sub[data-id="'+o.id+'"]');x.find("canvas").each(function(e,o){try{o.getContext("2d").drawImage(b[e],0,0)}catch(e){}});x.addClass("ogx_docker_sub_anim")});v.el.append(_)}function g(e,o){typeof o==="undefined"?o=true:null;if(a){clearTimeout(a);a=null}if(t){clearTimeout(t);t=null}if(y){clearTimeout(y);y=null}if(o){y=setTimeout(()=>{O();s.forEach(e=>{e.show(false)});s=[]},k.preview.remove_timeout)}}function O(){if(x){x.remove();x=null;r=null}}function m(){n.el=$(e.el);o=n.el;o.html('<div class="docker_list"></div>').addClass("ogx_docker")}function h(){w=n.create("DynamicList",{el:'.ogx_uxi[data-ogx-id="'+n.id+'"] .docker_list',id:"docker_list",key:"id",mode:"hit",display:{html:k.template,css:"ogx_docker_item"}})}function _(){m()}_()};OGX.Docker.SHOW="DockerShow";/* OGX.JS FlexCells@1.4.0 */
require("FlexCells","Uxi","Template","Touch","Placeholder");OGX.FlexCells=function(o){construct(this,"FlexCells");"use strict";var d=this;var e={axis:"x",min:10,template:null,auto_hide:true,children:["50%","30%","20%"]};var _=OGX.Data.merge(o,e,false);var h=this.el;var u={x:0,y:0,m:0};var g=null;this.construct=function(){};this.cellSize=function(s,e){if(typeof s==="undefined"){var i=[];this.el.children(".ogx_flex_cell").each((e,l)=>{i.push($(l).css("flex-basis"))});return i}var l,a;if(Array.isArray(s)){var r;this.el.children(".ogx_flex_cell").each((e,l)=>{r=$(l);r.css("flex-basis",s[e])})}else{typeof e==="string"?e=Number(e.replace("%","")):null;var t,c;l=this.el.children('.ogx_flex_cell[data-cell="'+s+'"]');if(s<this.el.children(".ogx_flex_cell").length-1){a=this.el.children('.ogx_flex_cell[data-cell="'+(s+1)+'"]')}else{a=this.el.children('.ogx_flex_cell[data-cell="'+(s-1)+'"]')}t=e-Number(l.css("flex-basis").split("%").shift());c=Number(a.css("flex-basis").split("%").shift())-t;l.css("flex-basis",e+"%");a.css("flex-basis",c+"%")}if(_.auto_hide){setTimeout(()=>{n()},300)}setTimeout(()=>d.resizeNodes(),5)};this.renderAt=function(e,l){this.clearAt(e);l=OGX.OML.rename(l,'.ogx_flex_cells[data-ogx-id="'+this.id+'"] > .ogx_flex_cell[data-cell="'+e+'"]');_["node:OML"].push(l);OGX.OML.render(this,l)};this.clearAt=function(e){var s,i;this.el.children('.ogx_flex_cell[data-cell="'+e+'"]').find(".ogx_uxi").each(function(e,l){s=$(l).data("ogx-id");i=d.find(null,s);if(i){i.kill()}})};this.flatten=function(e){if(e){d.el.children(".ogx_flex_cell_resize").addClass("ogx_flex_resize_hidden");d.el.addClass("ogx_flex_cells_col").removeClass("ogx_flex_cells_row")}else{d.el.children(".ogx_flex_cell_resize").removeClass("ogx_flex_resize_hidden");d.el.addClass("ogx_flex_cells_row").removeClass("ogx_flex_cells_col")}};function n(){var s=d.el.children(".ogx_flex_cell_resize");s.each((e,l)=>{if(e<s.length){el=$(l);cellA=el.prev().css("flex-basis");cellB=el.next().css("flex-basis");if([0,"0%"].includes(cellA)||[0,"0%"].includes(cellB)){el.addClass("ogx_flex_resize_hidden")}else{el.removeClass("ogx_flex_resize_hidden")}}})}function l(){var e="";for(var l=0;l<_.children.length;l++){e+='<span class="ogx_flex_cell" data-cell="'+l+'" style="flex-basis:'+_.children[l]+'"></span>';if(l<_.children.length-1){e+='<span class="ogx_flex_cell_resize"></span>'}}h.html(e)}function s(e){g=$(e.target);u.x=0;u.y=0;u.m=0}function i(e){var l;var s=h.width();if(o.axis==="x"){l=(e.distX-u.m)*100/s;u.m=e.distX}else{l=(e.distY-u.m)*100/h.height();u.m=e.distY}var i=Number(g.prev().css("flex-basis").split("%")[0]);var a=Number(g.next().css("flex-basis").split("%")[0]);var r=g.prev();var t=g.next();var c,n;if(Array.isArray(_.min)){var x=r.data("cell");var f=t.data("cell");c=_.min[x];n=_.min[f]}else{c=n=_.min}if(!isNaN(c)){c=c*100/s}else{c=Number(c.replace("%",""))}if(!isNaN(n)){n=n*100/s}else{n=Number(n.replace("%",""))}if(i+l>c&&a-l>n){g.prev().css("flex-basis",i+l+"%");g.next().css("flex-basis",a-l+"%");d.el.trigger(OGX.FlexCells.RESIZE);setTimeout(()=>d.resizeNodes(),5)}}function a(){var e={id:"move",min:0,target:".ogx_flex_cell_resize",cb_down:s,cb_move:i,capture:true};if(_.axis==="x"){e.x=true}else{e.y=true}d.touch.add("Move",e)}function r(){var e=h.children();var s=e.length;e.each(function(e,l){$(l).addClass("ogx_flex_cell").attr("data-cell",e).css("flex-basis",_.children[e]);if(e<s-1){$(l).after('<span class="ogx_flex_cell_resize"></span>')}})}function t(){var e=h.parent().children().not(".ogx_flex_cells");var l=e.clone();var s=e.length;var i;h.append(e);l.each(function(e,l){i=$(l);i.remove()});return s}function c(){var e=[];for(var l=0;l<_["node:OML"].length;l++){e.push('.ogx_flex_cells[data-ogx-id="'+d.id+'"] > .ogx_flex_cell[data-cell="'+l+'"]')}d.placeholders(_,e)}function x(){h.addClass("ogx_flex_cells");if(_.axis==="x"){h.addClass("ogx_flex_cells_row")}else{h.addClass("ogx_flex_cells_col")}var e=false;if(!_.template){e=t()}r();c();if(!_.template&&!e){l()}if(_.auto_hide){n()}a()}x()};OGX.FlexCells.RESIZE="FlexCellsResize";